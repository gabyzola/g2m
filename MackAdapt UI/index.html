<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MackAdapt â€“ Home</title>

  <!-- Styles & Icons -->
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script src="https://alcdn.msauth.net/browser/2.33.0/js/msal-browser.min.js"></script>
</head>

<body>
  <!-- Header -->
  <header>
    <h1>MackAdapt</h1>
    <nav>
      <ul>
        <li><a href="index.html" class="active" aria-current="page">Home</a></li>
        <li><a href="dashboard.html">Classes</a></li>
        <li><a href="student-dashboard.html">Student Dashboard</a></li>
        <li>
          <button id="ms-login-header" style="background:none; border:none; color:var(--gold); font-weight:bold; cursor:pointer;">
            Sign in
          </button>
        </li>
      </ul>
    </nav>
  </header>

  <!-- Main Page Content -->
  <main>
    <!-- Hero Banner -->
    <section class="hero-image" data-aos="fade-up">
      <div class="hero-text">
        <h2 id="welcome-text">Smarter Quizzes. Better Learning.</h2>
        <p>MackAdapt is Merrimack College's next-gen adaptive quiz platform designed to help students master material efficiently and confidently.</p>
        <a href="login.html"><button>Get Started</button></a>
      </div>
    </section>

    <div class="divider"></div>

    <!-- About Section -->
    <section class="about" data-aos="fade-right">
      <div class="about-container">
        <div class="about-image">
          <img src="images/adaptive-learning.png" alt="Adaptive Learning Illustration">
        </div>
        <div class="about-text">
          <h3>What is MackAdapt?</h3>
          <p>
            MackAdapt is an adaptive learning tool built for Merrimack students and professors.
            Our mission is to personalize quiz experiences based on your progress â€” no more one-size-fits-all testing.
          </p>
          <ul>
            <li><i class="fas fa-brain"></i> Real-time adaptation based on your answers</li>
            <li><i class="fas fa-bullseye"></i> Aligned with your learning objectives</li>
            <li><i class="fas fa-chalkboard-teacher"></i> Easy-to-use dashboard for students and instructors</li>
          </ul>
        </div>
      </div>
    </section>

    <div class="divider"></div>

    <!-- How It Works -->
    <section class="how-it-works" data-aos="fade-up">
      <h3>How It Works</h3>
      <div class="steps">
        <div class="step">
          <i class="fas fa-user-circle"></i>
          <h4>1. Sign In</h4>
          <p>Log in to your student dashboard with your school credentials.</p>
        </div>
        <div class="step">
          <i class="fas fa-clipboard-check"></i>
          <h4>2. Take Adaptive Quizzes</h4>
          <p>Questions adapt to your performance in real time.</p>
        </div>
        <div class="step">
          <i class="fas fa-chart-line"></i>
          <h4>3. Track Your Progress</h4>
          <p>See what youâ€™ve mastered and where to focus next.</p>
        </div>
      </div>
    </section>

    <div class="divider"></div>

    <!-- Call to Action -->
    <section class="cta" data-aos="zoom-in">
      <h3>Ready to learn smarter?</h3>
      <p>Login to access your personalized dashboard and start mastering your courses.</p>
      <a href="login.html"><button>Login Now</button></a>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 MackAdapt â€“ Built for Merrimack College</p>
  </footer>

  <!-- Initialize AOS -->
  <script>
    AOS.init();
  </script>

  <!-- MSAL Integration -->
  <script>
    const msalConfig = {
      auth: {
        clientId: "f1eb948d-5297-47ce-a4c4-419d1f699607",
        authority: "https://login.microsoftonline.com/57e1236c-0fa3-4739-9edf-fd0721c8744d/",
        redirectUri: window.location.origin + window.location.pathname
      },
      cache: { cacheLocation: "localStorage", storeAuthStateInCookie: false }
    };

    const msalInstance = new msal.PublicClientApplication(msalConfig);
    const loginRequest = { scopes: ["openid","profile","email","User.Read"] };

    const loginBtn = document.getElementById("ms-login-header");

    // Login on header button click
    loginBtn.addEventListener("click", async () => {
      try {
        const response = await msalInstance.loginPopup(loginRequest);
        msalInstance.setActiveAccount(response.account);
        loginBtn.textContent = `Hello, ${response.account.name}`;
        document.getElementById("welcome-text").textContent = `Welcome, ${response.account.name} ðŸ‘‹`;
      } catch (err) {
        console.error("Login failed:", err);
        alert("Login failed. Check console for details.");
      }
    });

    // Handle existing session / redirect responses
    window.addEventListener("DOMContentLoaded", () => {
      msalInstance.handleRedirectPromise()
        .then(response => {
          const account = response?.account || msalInstance.getActiveAccount();
          if (account) {
            msalInstance.setActiveAccount(account);
            loginBtn.textContent = `Hello, ${account.name}`;
            document.getElementById("welcome-text").textContent = `Welcome, ${account.name} ðŸ‘‹`;
          }
        })
        .catch(console.error);
    });
  </script>

</body>
</html>
